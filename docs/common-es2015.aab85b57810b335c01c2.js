(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4Y61":function(t,i,e){"use strict";e.d(i,"a",(function(){return r}));var s=e("kt0X");const h=Object(s.o)("cities"),r=t=>Object(s.p)(h,i=>i.cities.find(i=>i.id==t))},HkPj:function(t,i,e){"use strict";e.d(i,"a",(function(){return b}));var s=e("uIK9"),h=e("sYnD"),r=e("EQES"),a=e("l5mm"),n=e("PqYM"),o=e("QuZ5"),c=e("h4i/"),f=e("fXoL"),d=e("kt0X"),p=e("7cwC");let b=(()=>{class t{constructor(t,i){this.store=t,this._notifier=i,this.fightIntervals=new Set}initialize(t){var i;if(this.hero=t,!this.isFigthing){this.isFigthing=!0,this.fighter.hp=this.fighter.maxHp,null===(i=this.fighter.debuffs)||void 0===i||i.forEach(t=>{clearTimeout(t.timeOut),clearInterval(t.interval)}),this.fighter.debuffs=[];let t=[...this.hero.equippedSpell].map(t=>Object.assign(Object.assign({},t),{isInCooldown:!1}));this.store.dispatch(new h.l(Object.assign(Object.assign({},this.hero),{hp:this.hero.maxHp,equippedSpell:t}))),this.startFight()}}startFight(){let t=Object(a.a)(this.hero.weapon?this.hero.weapon.speed:1e3).subscribe(()=>{let t=1,i=Object(r.c)(this.hero),e=`You hit for ${i}`;Object(r.i)(this.hero)&&(t=2,e=`You critical hit for : ${2*i}`),this.fighter.hp=Math.floor(this.fighter.hp-i*t),this._notifier.notify(e,"","text"),this.fighter.hp<=0&&(this.victory(),this.death())}),i=Object(a.a)(this.fighter.attackSpeed).subscribe(()=>{this.store.dispatch(new h.l(Object.assign(Object.assign({},this.hero),{hp:this.hero.hp-this.fighter.attack}))),this.hero.hp<=0&&this.death()});this.fightIntervals.add(t),this.fightIntervals.add(i)}stop(){this.fightIntervals.forEach(t=>{t.unsubscribe()}),this.fightIntervals.clear(),this.isFigthing=!1}death(){this.stop(),this.initialize(this.hero)}activateSpell(t){Object(s.c)(t,this.fighter,this.hero,Object(r.i)(this.hero)),this.store.dispatch(new h.b(Object.assign(Object.assign({},t),{isInCooldown:!0}))),this.fightIntervals.add(Object(n.a)(1e3*t.cooldown).subscribe(()=>{this.store.dispatch(new h.b(Object.assign(Object.assign({},t),{isInCooldown:!1})))})),this.fighter.hp<=0&&(this.victory(),this.death())}victory(){this.store.dispatch(new h.l(Object(o.b)(this.hero,this.fighter)));let t=Object(c.c)(this.fighter.level,this.fighter.lootbag);if(null!=t)switch(t.rewardType){case"currency":this.store.dispatch(new h.h(t.reward)),this._notifier.notify(t.reward.name,`currency ${t.reward.name}`,"reward",t.reward.quantity);break;case"armor":case"weapon":this.store.dispatch(new h.j(t.reward)),this._notifier.notify(t.reward.name,`   \n                            ${t.reward.subType} \n                            ${t.reward.icon}\n                        `,"reward")}}}return t.\u0275fac=function(i){return new(i||t)(f.Xb(d.h),f.Xb(p.a))},t.\u0275prov=f.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},IM8C:function(t,i,e){"use strict";e.d(i,"a",(function(){return h}));var s=e("QPBi");function h(t,i){return Object.assign(Object.assign({},t),{attack:t.attack*i,defense:t.defense*i,maxHp:Object(s.g)((t.maxHp*(1+.3*i)).toFixed(2)),hp:Object(s.g)((t.maxHp*(1+.3*i)).toFixed(2)),level:i})}}}]);