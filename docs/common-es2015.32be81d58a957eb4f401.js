(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4Y61":function(t,i,e){"use strict";e.d(i,"a",(function(){return r}));var s=e("kt0X");const h=Object(s.o)("cities"),r=t=>Object(s.p)(h,i=>i.cities.find(i=>i.id==t))},HkPj:function(t,i,e){"use strict";e.d(i,"a",(function(){return f}));var s=e("uIK9"),h=e("sYnD"),r=e("EQES"),n=e("l5mm"),a=e("PqYM"),c=e("QuZ5"),o=e("RuNC"),p=e("fXoL"),b=e("kt0X");let f=(()=>{class t{constructor(t){this.store=t,this.fightIntervals=new Set}initialize(t){var i;if(this.hero=t,!this.isFigthing){this.isFigthing=!0,this.fighter.hp=this.fighter.maxHp,null===(i=this.fighter.debuffs)||void 0===i||i.forEach(t=>{clearTimeout(t.timeOut),clearInterval(t.interval)}),this.fighter.debuffs=[];let t=[...this.hero.equippedSpell].map(t=>Object.assign(Object.assign({},t),{isInCooldown:!1}));this.store.dispatch(new h.l(Object.assign(Object.assign({},this.hero),{hp:this.hero.maxHp,equippedSpell:t}))),this.startFight()}}startFight(){let t=Object(n.a)(this.hero.weapon?this.hero.weapon.speed:1e3).subscribe(()=>{this.fighter.hp=Math.floor(this.fighter.hp-Object(r.b)(this.hero)),this.fighter.hp<=0&&(this.victory(),this.death())}),i=Object(n.a)(this.fighter.attackSpeed).subscribe(()=>{this.store.dispatch(new h.l(Object.assign(Object.assign({},this.hero),{hp:this.hero.hp-this.fighter.attack}))),this.hero.hp<=0&&this.death()});this.fightIntervals.add(t),this.fightIntervals.add(i)}stop(){this.fightIntervals.forEach(t=>{t.unsubscribe()}),this.fightIntervals.clear(),this.isFigthing=!1}death(){this.stop(),this.initialize(this.hero)}activateSpell(t){Object(s.c)(t,this.fighter,this.hero),this.store.dispatch(new h.b(Object.assign(Object.assign({},t),{isInCooldown:!0}))),this.fightIntervals.add(Object(a.a)(1e3*t.cooldown).subscribe(()=>{this.store.dispatch(new h.b(Object.assign(Object.assign({},t),{isInCooldown:!1})))})),this.fighter.hp<=0&&(this.victory(),this.death())}victory(){this.store.dispatch(new h.l(Object(c.b)(this.hero,this.fighter))),this.store.dispatch(new h.j(Object(o.b)(this.fighter.level,2)))}}return t.\u0275fac=function(i){return new(i||t)(p.Xb(b.h))},t.\u0275prov=p.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},IM8C:function(t,i,e){"use strict";e.d(i,"a",(function(){return h}));var s=e("QPBi");function h(t,i){return Object.assign(Object.assign({},t),{attack:t.attack*i,defense:t.defense*i,maxHp:Object(s.g)((t.maxHp*(1+.3*i)).toFixed(2)),hp:Object(s.g)((t.maxHp*(1+.3*i)).toFixed(2)),level:i})}}}]);