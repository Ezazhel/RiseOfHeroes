function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4Y61":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var r=i("kt0X"),n=Object(r.o)("cities"),o=function(t){return Object(r.p)(n,(function(e){return e.cities.find((function(e){return e.id==t}))}))}},HkPj:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var r=i("uIK9"),n=i("sYnD"),o=i("EQES"),s=i("l5mm"),a=i("PqYM"),c=i("QuZ5"),h=i("h4i/"),u=i("ozXD"),f=i("fXoL"),l=i("kt0X"),b=i("7cwC"),d=function(){var t=function(){function t(e,i){_classCallCheck(this,t),this.store=e,this._notifier=i,this.fightIntervals=new Set}return _createClass(t,[{key:"initialize",value:function(t){var e,i;if(this.hero=t,!this.isFigthing){this.isFigthing=!0,this.fighter.hp=this.fighter.maxHp,null===(e=this.fighter.debuffs)||void 0===e||e.forEach((function(t){clearTimeout(t.timeOut),clearInterval(t.interval)})),this.fighter.debuffs=[];var r=_toConsumableArray(this.hero.equippedSpell).map((function(t){return Object.assign(Object.assign({},t),{isInCooldown:!1})}));this.store.dispatch(new n.n(Object.assign(Object.assign({},this.hero),{hp:this.hero.maxHp,equippedSpell:r,potion:Object.assign(Object.assign({},null===(i=this.hero)||void 0===i?void 0:i.potion),{isInCooldown:!1})}))),this.startFight()}}},{key:"startFight",value:function(){var t=this,e=Object(s.a)(this.hero.weapon?Object(o.h)("swiftness",this.hero,this.hero.weapon.speed):Object(o.h)("swiftness",this.hero,1e3)).subscribe((function(){var e=1,i=Object(o.c)(t.hero),r="You hit for ".concat(i);Object(o.i)(t.hero)&&(e=2,r="You critical hit for : ".concat(2*i)),t.fighter.hp=Math.floor(t.fighter.hp-i*e),t._notifier.notify(r,"","text"),t.fighter.hp<=0&&(t.victory(),t.death())})),i=Object(s.a)(this.fighter.attackSpeed).subscribe((function(){t.store.dispatch(new n.n(Object.assign(Object.assign({},t.hero),{hp:t.hero.hp-t.fighter.attack}))),t.hero.hp<=0&&t.death()}));this.fightIntervals.add(e),this.fightIntervals.add(i)}},{key:"stop",value:function(){this.fightIntervals.forEach((function(t){t.unsubscribe()})),this.fightIntervals.clear(),this.isFigthing=!1}},{key:"death",value:function(){this.stop(),this.initialize(this.hero)}},{key:"activateSpell",value:function(t){var e=this;Object(r.c)(t,this.fighter,this.hero,Object(o.i)(this.hero)),this.store.dispatch(new n.d(Object.assign(Object.assign({},t),{isInCooldown:!0}))),this.fightIntervals.add(Object(a.a)(Object(o.h)("swiftness",this.hero,1e3*t.cooldown)).subscribe((function(){e.store.dispatch(new n.d(Object.assign(Object.assign({},t),{isInCooldown:!1})))}))),this.fighter.hp<=0&&(this.victory(),this.death())}},{key:"usePotion",value:function(t){var e=this;Object(u.b)(t,this.hero,this.store,this._notifier),this.store.dispatch(new n.c(Object.assign(Object.assign({},t),{isInCooldown:!0}))),this.fightIntervals.add(Object(a.a)(Object(o.h)("swiftness",this.hero,1e3*t.cooldown)).subscribe((function(){e.store.dispatch(new n.c(Object.assign(Object.assign({},t),{isInCooldown:!1})))})))}},{key:"victory",value:function(){this.store.dispatch(new n.n(Object(c.b)(this.hero,this.fighter)));var t=Object(h.c)(this.fighter.level,this.fighter.lootbag);if(null!=t)switch(t.rewardType){case"currency":this.store.dispatch(new n.j(t.reward)),this._notifier.notify(t.reward.name,"currency ".concat(t.reward.name),"reward",t.reward.quantity);break;case"armor":case"weapon":this.store.dispatch(new n.l(t.reward)),this._notifier.notify(t.reward.name,"   \n                            ".concat(t.reward.subType," \n                            ").concat(t.reward.icon,"\n                        "),"reward")}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Xb(l.h),f.Xb(b.a))},t.\u0275prov=f.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},IM8C:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var r=i("QPBi");function n(t,e){return Object.assign(Object.assign({},t),{attack:t.attack*e,defense:t.defense*e,maxHp:Object(r.g)((t.maxHp*(1+.3*e)).toFixed(2)),hp:Object(r.g)((t.maxHp*(1+.3*e)).toFixed(2)),level:e})}}}]);