function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4Y61":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("kt0X"),n=Object(i.o)("cities"),a=function(t){return Object(i.p)(n,(function(e){return e.cities.find((function(e){return e.id==t}))}))}},HkPj:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var i=r("uIK9"),n=r("sYnD"),a=r("EQES"),o=r("l5mm"),s=r("PqYM"),c=r("QuZ5"),h=r("h4i/"),u=r("fXoL"),f=r("kt0X"),l=r("7cwC"),b=function(){var t=function(){function t(e,r){_classCallCheck(this,t),this.store=e,this._notifier=r,this.fightIntervals=new Set}return _createClass(t,[{key:"initialize",value:function(t){var e;if(this.hero=t,!this.isFigthing){this.isFigthing=!0,this.fighter.hp=this.fighter.maxHp,null===(e=this.fighter.debuffs)||void 0===e||e.forEach((function(t){clearTimeout(t.timeOut),clearInterval(t.interval)})),this.fighter.debuffs=[];var r=_toConsumableArray(this.hero.equippedSpell).map((function(t){return Object.assign(Object.assign({},t),{isInCooldown:!1})}));this.store.dispatch(new n.l(Object.assign(Object.assign({},this.hero),{hp:this.hero.maxHp,equippedSpell:r}))),this.startFight()}}},{key:"startFight",value:function(){var t=this,e=Object(o.a)(this.hero.weapon?this.hero.weapon.speed:1e3).subscribe((function(){var e=1,r=Object(a.c)(t.hero),i="You hit for ".concat(r);Object(a.i)(t.hero)&&(e=2,i="You critical hit for : ".concat(2*r)),t.fighter.hp=Math.floor(t.fighter.hp-r*e),t._notifier.notify(i,"","text"),t.fighter.hp<=0&&(t.victory(),t.death())})),r=Object(o.a)(this.fighter.attackSpeed).subscribe((function(){t.store.dispatch(new n.l(Object.assign(Object.assign({},t.hero),{hp:t.hero.hp-t.fighter.attack}))),t.hero.hp<=0&&t.death()}));this.fightIntervals.add(e),this.fightIntervals.add(r)}},{key:"stop",value:function(){this.fightIntervals.forEach((function(t){t.unsubscribe()})),this.fightIntervals.clear(),this.isFigthing=!1}},{key:"death",value:function(){this.stop(),this.initialize(this.hero)}},{key:"activateSpell",value:function(t){var e=this;Object(i.c)(t,this.fighter,this.hero,Object(a.i)(this.hero)),this.store.dispatch(new n.b(Object.assign(Object.assign({},t),{isInCooldown:!0}))),this.fightIntervals.add(Object(s.a)(1e3*t.cooldown).subscribe((function(){e.store.dispatch(new n.b(Object.assign(Object.assign({},t),{isInCooldown:!1})))}))),this.fighter.hp<=0&&(this.victory(),this.death())}},{key:"victory",value:function(){this.store.dispatch(new n.l(Object(c.b)(this.hero,this.fighter)));var t=Object(h.c)(this.fighter.level,this.fighter.lootbag);if(null!=t)switch(t.rewardType){case"currency":this.store.dispatch(new n.h(t.reward)),this._notifier.notify(t.reward.name,"currency ".concat(t.reward.name),"reward",t.reward.quantity);break;case"armor":case"weapon":this.store.dispatch(new n.j(t.reward)),this._notifier.notify(t.reward.name,"   \n                            ".concat(t.reward.subType," \n                            ").concat(t.reward.icon,"\n                        "),"reward")}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Xb(f.h),u.Xb(l.a))},t.\u0275prov=u.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},IM8C:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var i=r("QPBi");function n(t,e){return Object.assign(Object.assign({},t),{attack:t.attack*e,defense:t.defense*e,maxHp:Object(i.g)((t.maxHp*(1+.3*e)).toFixed(2)),hp:Object(i.g)((t.maxHp*(1+.3*e)).toFixed(2)),level:e})}}}]);